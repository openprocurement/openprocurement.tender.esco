from openprocurement.tender.esco.utils import calculate_npv

from openprocurement.tender.esco.npv_calculation import (
    calculate_discount_coef,
)

def discount_coef(self):
    discount_rate = [4.623] + [12.500] * 19 + [7.877]
    self.assertEqual(
        calculate_discount_coef(discount_rate),
        [0.9558127753935559, 0.8496113559053831, 0.7552100941381182, 0.6712978614561051, 0.5967092101832046,
         0.5304081868295152, 0.4714739438484579, 0.41908795008751815, 0.37252262230001615, 0.33113121982223653,
         0.2943388620642103, 0.2616345440570758, 0.23256403916184515, 0.2067235903660846, 0.18375430254763073,
         0.1633371578201162, 0.14518858472899218, 0.12905651975910418, 0.11471690645253704, 0.10197058351336626,
         0.09452486026990578]
    )

    discount_rate = [0]*21
    self.assertEqual(
        calculate_discount_coef(discount_rate),
        [1.0]*21
    )

    discount_rate = [12.500] * 21
    self.assertEqual(
        calculate_discount_coef(discount_rate),
        [0.8888888888888888, 0.7901234567901234, 0.7023319615912208, 0.6242950769699741, 0.5549289573066436,
         0.49327018427257213, 0.4384623860200641, 0.38974434312894585, 0.34643941611461854, 0.3079461476574387,
         0.27372990902883443, 0.24331547469229725, 0.21628042194870867, 0.1922492639544077, 0.1708882346261402,
         0.1519006530010135, 0.13502280266756755, 0.12002026903783783, 0.10668468358918917, 0.09483082985705704,
         0.08429407098405071]
    )